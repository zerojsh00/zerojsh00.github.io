<!DOCTYPE html><html lang="ko" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="(K8S) 도커와 쿠버네티스의 매개변수 받는 방법" /><meta name="author" content="simon sanghyeon" /><meta property="og:locale" content="ko" /><meta name="description" content="이 글은 Mumshad Mannambeth가 강의한 Udemy의 Certified Kubernetes Administrator (CKA) with Practice Tests 강의 커리큘럼을 토대로 공부한 내용을 정리하였음을 밝힙니다." /><meta property="og:description" content="이 글은 Mumshad Mannambeth가 강의한 Udemy의 Certified Kubernetes Administrator (CKA) with Practice Tests 강의 커리큘럼을 토대로 공부한 내용을 정리하였음을 밝힙니다." /><link rel="canonical" href="https://zerojsh00.github.io/posts/Commands-and-Arguments/" /><meta property="og:url" content="https://zerojsh00.github.io/posts/Commands-and-Arguments/" /><meta property="og:site_name" content="Simon’s Research Center" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-08-19T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="(K8S) 도커와 쿠버네티스의 매개변수 받는 방법" /><meta name="twitter:site" content="@" /><meta name="twitter:creator" content="@simon sanghyeon" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"simon sanghyeon"},"dateModified":"2022-09-26T15:01:12+09:00","datePublished":"2022-08-19T00:00:00+09:00","description":"이 글은 Mumshad Mannambeth가 강의한 Udemy의 Certified Kubernetes Administrator (CKA) with Practice Tests 강의 커리큘럼을 토대로 공부한 내용을 정리하였음을 밝힙니다.","headline":"(K8S) 도커와 쿠버네티스의 매개변수 받는 방법","mainEntityOfPage":{"@type":"WebPage","@id":"https://zerojsh00.github.io/posts/Commands-and-Arguments/"},"url":"https://zerojsh00.github.io/posts/Commands-and-Arguments/"}</script><title>(K8S) 도커와 쿠버네티스의 매개변수 받는 방법 | Simon's Research Center</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Simon's Research Center"><meta name="application-name" content="Simon's Research Center"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><meta name="google-site-verification" content="J_a4XJ2oefe52p6EYvjTFdh9LW5Yc5RyGg1HpQOjWaA" /><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/avatar.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Simon's Research Center</a></div><div class="site-subtitle font-italic">성장하는 연구원의 공책</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/zerojsh00" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['zerojsh00','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>(K8S) 도커와 쿠버네티스의 매개변수 받는 방법</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>(K8S) 도커와 쿠버네티스의 매개변수 받는 방법</h1><div class="post-meta text-muted"><div> By <em> Sanghyeon </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1660834800" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-08-19 </em> </span> <span> Updated <em class="timeago" data-ts="1664172072" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-09-26 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2015 words"> <em>11 min</em> read</span></div></div></div><div class="post-content"><p>이 글은 Mumshad Mannambeth가 강의한 Udemy의 Certified Kubernetes Administrator (CKA) with Practice Tests 강의 커리큘럼을 토대로 공부한 내용을 정리하였음을 밝힙니다.</p><hr /><h1 id="docker-간단히-살펴보는-dockerfile의-cmd">[Docker] 간단히 살펴보는 Dockerfile의 CMD</h1><h2 id="프로세스가-종료되면-함께-종료되는-컨테이너"><span class="mr-2">프로세스가 종료되면 함께 종료되는 컨테이너</span><a href="#프로세스가-종료되면-함께-종료되는-컨테이너" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><img data-src="/assets/img/2022-08-19-Commands and Arguments/fig01.png" alt="fig01" data-proofer-ignore> docker를 이용해서 우분투 이미지를 실행하면, 위와 같이 곧바로 <code class="language-plaintext highlighter-rouge">exit(종료)</code> 상태로 변경되어 버린다. 왜 그런 것일까?</p><p>컨테이너는 운영체제를 호스트 하지는 않고, 단지 웹 서버나, 데이터베이스와 같은 특정 프로세스들을 실행할 수 있게 한다. 또한 이러한 <strong>내부 프로세스들이 살아있는 동안에만 컨테이너도 살아있기 때문에, 내부 프로세스들이 종료되면 컨테이너도 종료된다.</strong></p><h2 id="컨테이너가-생성될-때-실행될-명령을-정의하는-cmd"><span class="mr-2">컨테이너가 생성될 때 실행될 명령을 정의하는 CMD</span><a href="#컨테이너가-생성될-때-실행될-명령을-정의하는-cmd" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>그렇다면, 컨테이너 내부에 있는 프로세스는 어디에서 실행되도록 정의되어 있을까? 정답은 <code class="language-plaintext highlighter-rouge">도커 파일(Dockerfile)</code>이다. 보통 도커 파일을 열어보면, 다음과 같이 생겼다.</p><p><img data-src="/assets/img/2022-08-19-Commands and Arguments/fig02.png" alt="fig02" data-proofer-ignore></p><p>nginx를 설치하고 실행하는 이 도커 파일을 보면, 마지막 CMD 명령어 부분에 컨테이너 내부에서 실행될 프로그램 명령이 적혀있는 것을 알 수 있다. 이것이 실행되면 컨테이너 내부에서 해당 명령에 대한 프로세스가 실행되는 것이다.</p><p><img data-src="/assets/img/2022-08-19-Commands and Arguments/fig03.png" alt="fig03" data-proofer-ignore></p><p>앞서 우분투를 실행하기 위해 사용했던 우분투의 도커 파일을 열어보면, <code class="language-plaintext highlighter-rouge">CMD</code> 명령어 부분이 <code class="language-plaintext highlighter-rouge">bash</code>라고 되어 있는 것을 알 수 있다. bash는 nginx 웹 서버나 mysql 데이터베이스 같은 프로그램이 아닌, shell 이다. shell은 터미널로부터 input을 기다리고 있다가, 터미널을 찾지 못하면 종료된다.</p><p>앞서 실행했듯이, 우분투 컨테이너를 run하면, 도커는 우분투 이미지로부터 컨테이너를 만들고 bash program을 실행한다. 그런데 도커는 기본적으로 컨테이너가 실행될 때 컨테이너에 터미널을 붙이지 않는다. 따라서 bash program이 터미널을 찾지 못해서 종료되는 것이다. (컨테이너가 생성될 때 만들어졌던 프로세스가 종료되면, 컨테이너도 종료되는 것 또한 유사한 원리다.)</p><hr /><h1 id="docker-ubuntu-sleep-명령-예제를-통해-살펴보는-cmd와-entrypoint">[Docker] ubuntu sleep 명령 예제를 통해 살펴보는 CMD와 ENTRYPOINT</h1><h2 id="도커-파일의-cmd"><span class="mr-2">도커 파일의 CMD</span><a href="#도커-파일의-cmd" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><code class="language-plaintext highlighter-rouge">docker run ubuntu sleep 5</code> 명령을 입력하면, 실행 즉시 5초 동안 sleep 한 후 종료되는 우분투 컨테이너가 실행된다. 위와 같은 명령어는 command line에 파라미터를 이용해서 단 한번만 단편적으로 실행되도록 한다.</p><p>이러한 sleep 명령을 다음과 같이 아예 도커 파일에 정의하면, 매번 이미지를 실행할 때마다 5초간 sleep 후 종료되는 컨테이너를 만들 수 있다.</p><div class="language-docker highlighter-rouge"><div class="code-header"> <span data-label-text="Docker"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="k">FROM</span><span class="s"> Ubuntu</span>
<span class="k">CMD</span><span class="s"> sleep 5</span>

<span class="c"># 혹은 CMD ["sleep", "5"]</span>
</pre></table></code></div></div><p>이러한 도커 파일을 <code class="language-plaintext highlighter-rouge">ubuntu-sleeper</code>라는 이름으로 이미지를 빌드하고 실행하면, 5초간 sleep 후 종료되는 우분투 컨테이너가 실행되는 것이다. 이처럼 도커 파일에 <code class="language-plaintext highlighter-rouge">CMD</code>를 활용하여 <code class="language-plaintext highlighter-rouge">sleep</code> 명령과 <code class="language-plaintext highlighter-rouge">sleep 시간</code>을 정의하면, <code class="language-plaintext highlighter-rouge">docker run ubuntu-sleeper sleep {원하는 시간}</code>과 같이 {원하는 시간}을 파라미터로 줌으로써 sleep 시간을 오버라이드한 명령을 수행할 수도 있다. <strong>즉, 핵심은 docker run 명령 시 CMD에 정의한 스크립트가 오버라이드 될 수 있다는 것이다.</strong></p><h2 id="도커-파일의-entrypoint"><span class="mr-2">도커 파일의 ENTRYPOINT</span><a href="#도커-파일의-entrypoint" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="반드시-실행되어야-할-명령어를-지정한다"><span class="mr-2">반드시 실행되어야 할 명령어를 지정한다.</span><a href="#반드시-실행되어야-할-명령어를-지정한다" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>그런데 <code class="language-plaintext highlighter-rouge">docker run ubuntu-sleeper sleep {원하는 시간}</code>처럼 <code class="language-plaintext highlighter-rouge">{원하는 시간}</code>을 오버라이드 할 수는 있지만, <code class="language-plaintext highlighter-rouge">sleep</code>이라는 CMD 명령어를 입력해야 하는 불편함이 있다. 이 경우, <code class="language-plaintext highlighter-rouge">ENTRYPOINT</code>를 이용할 수 있다. ENTRYPOINT는 CMD와 비슷한데, <code class="language-plaintext highlighter-rouge">docker run</code> <strong>명령으로 컨테이너가 시작되는 시점에 ENTRYPOINT의 명령어가 반드시 실행된다.</strong> 예제를 살펴보자.</p><div class="language-docker highlighter-rouge"><div class="code-header"> <span data-label-text="Docker"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="k">FROM</span><span class="s"> Ubuntu</span>
<span class="k">ENTRYPOINT</span><span class="s"> ["sleep"]</span>
</pre></table></code></div></div><p>위와 같이 명령어를 입력한 후, 마찬가지로 ubuntu-sleeper라는 이름으로 이미지를 빌드한 후, <code class="language-plaintext highlighter-rouge">docker run ubuntu-sleeper {원하는 시간}</code> 명령을 실행하면, ENTRYPOINT에 정의된 <code class="language-plaintext highlighter-rouge">sleep</code> 명령어가 반드시 실행되므로, 숫자 <code class="language-plaintext highlighter-rouge">{원하는 시간}</code>만이 매개변수로 작용하여 해당 시간만큼 sleep하게 된다.</p><h2 id="cmd와-entrypoint의-조합"><span class="mr-2">CMD와 ENTRYPOINT의 조합</span><a href="#cmd와-entrypoint의-조합" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="entrypoint로-command를-지정하고-매개변수의-기본값은-cmd로-정의한다"><span class="mr-2">ENTRYPOINT로 Command를 지정하고, 매개변수의 기본값은 CMD로 정의한다.</span><a href="#entrypoint로-command를-지정하고-매개변수의-기본값은-cmd로-정의한다" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-docker highlighter-rouge"><div class="code-header"> <span data-label-text="Docker"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="k">FROM</span><span class="s"> Ubuntu</span>
<span class="k">ENTRYPOINT</span><span class="s"> ["sleep"]</span>
<span class="k">CMD</span><span class="s"> ["5"]</span>
</pre></table></code></div></div><p>도커 파일을 구성할 때, ENTRYPOINT와 CMD를 함께 사용하면, 이미지를 실행할 때 ENTRYPOINT를 반드시 사용하고, default 값으로는 CMD에서 정의된 값이 자동으로 사용된다. 또한 <code class="language-plaintext highlighter-rouge">docker run ubuntu-sleeper {원하는 시간}</code> 명령을 실행하여 매개변수로 원하는 값을 입력함으로써 CMD에 정의되어 있는 default 값을 오버라이딩 할 수도 있다.</p><hr /><h1 id="kubernetes-컨테이너의-매개변수를-받는-방법">[Kubernetes] 컨테이너의 매개변수를 받는 방법</h1><p>앞서 살펴본 <code class="language-plaintext highlighter-rouge">ubuntu-sleeper</code> 예제를 쿠버네티스에서 배포하면 매개변수를 어떻게 처리해야 하는지 살펴보자.</p><h2 id="args를-활용하여-매개변수-받기"><span class="mr-2">args를 활용하여 매개변수 받기</span><a href="#args를-활용하여-매개변수-받기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="c1"># pod-definition.yaml</span>

<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Pod</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">ubuntu-sleeper-pod</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">containers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">ubuntu-sleeper</span>
      <span class="na">image</span><span class="pi">:</span> <span class="s">ubuntu-sleeper</span>
</pre></table></code></div></div><p>ubuntu-sleeper 도커 파일을 빌드하여 이미지를 생성하면, 위와 같이 파드를 정의하는 YAML 파일을 만들어볼 수 있다. 그런데, 앞서 도커 컨테이너를 이용한 예제에서는 매개변수로 sleep 시간을 command line에 추가로 넣어줄 수 있었다. 파드 생성 시에는 어떻게 해야 할까?</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="c1"># pod-definition.yaml</span>

<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Pod</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">ubuntu-sleeper-pod</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">containers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">ubuntu-sleeper</span>
      <span class="na">image</span><span class="pi">:</span> <span class="s">ubuntu-sleeper</span>
      <span class="na">args</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">10"</span><span class="pi">]</span> <span class="c1"># 추가된 부분! 파드에서는 이와 같이 매개변수를 입력한다.</span>
</pre></table></code></div></div><p>위 YAML을 보면, 마지막 줄에 args를 통해 매개변수를 입력할 수 있다. 도커 파일과 함께 보면 더욱 이해하기 쉽다.</p><div class="language-docker highlighter-rouge"><div class="code-header"> <span data-label-text="Docker"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="k">FROM</span><span class="s"> Ubuntu</span>
<span class="k">ENTRYPOINT</span><span class="s"> ["sleep"]</span>
<span class="k">CMD</span><span class="s"> ["5"]</span>
</pre></table></code></div></div><p>YAML 파일의 args는 위와 같은 도커 파일의 CMD 부분을 오버라이드 하는 것이다. <code class="language-plaintext highlighter-rouge">kubectl create -f pod-definition.yaml</code> 명령을 입력하면 도커 파일의 CMD 부분이 오버라이드된 파드가 생성된다.</p><h2 id="쿠버네티스에서-dockerfile의-entrypoint-오버라이드-하기"><span class="mr-2">쿠버네티스에서 Dockerfile의 ENTRYPOINT 오버라이드 하기</span><a href="#쿠버네티스에서-dockerfile의-entrypoint-오버라이드-하기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>만약, 도커 파일의 ENTRYPOINT를 오버라이드 하고 싶다면 어떻게 해야할까? 참고로 도커 명령어로는 <code class="language-plaintext highlighter-rouge">docker run --name ubuntu-sleeper --entrypoint sleep2.0 ubuntu-sleeper 10</code>과 같은 방식으로 ENTRYPOINT를 컨테이너 실행 시 오버라이드 할 수 있다. 그렇다면, 파드로는 어떻게 할까? 이는 파드 정의 YAML의 <code class="language-plaintext highlighter-rouge">command</code>에 대응된다.</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="c1"># pod-definition.yaml</span>

<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Pod</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">ubuntu-sleeper-pod</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">containers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">ubuntu-sleeper</span>
      <span class="na">image</span><span class="pi">:</span> <span class="s">ubuntu-sleeper</span>
      <span class="na">command</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">sleep2.0"</span><span class="pi">]</span> <span class="c1"># 도커 파일의 ENTRYPOINT는 파드 생성 시 'command'에 대응된다.</span>
      <span class="na">args</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">10"</span><span class="pi">]</span>
</pre></table></code></div></div><hr /><h1 id="참고-문헌">참고 문헌</h1><p>[1] <code class="language-plaintext highlighter-rouge">Mumshad Mannambeth의 강의</code> : <a href="https://www.udemy.com/course/certified-kubernetes-administrator-with-practice-tests/">Certified Kubernetes Administrator (CKA) with Practice Tests</a><br /> [2] <code class="language-plaintext highlighter-rouge">시작하세요! 도커/쿠버네티스 (용찬호 지음)</code> : <a href="http://www.yes24.com/Product/Goods/84927385">시작하세요! 도커/쿠버네티스</a><br /></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/kubernetes/'>Kubernetes</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/kubernetes/" class="post-tag no-text-decoration" >Kubernetes</a> <a href="/tags/k8s/" class="post-tag no-text-decoration" >K8S</a> <a href="/tags/docker/" class="post-tag no-text-decoration" >Docker</a> <a href="/tags/argument/" class="post-tag no-text-decoration" >Argument</a> <a href="/tags/command/" class="post-tag no-text-decoration" >Command</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%28K8S%29+%EB%8F%84%EC%BB%A4%EC%99%80+%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4%EC%9D%98+%EB%A7%A4%EA%B0%9C%EB%B3%80%EC%88%98+%EB%B0%9B%EB%8A%94+%EB%B0%A9%EB%B2%95+-+Simon%27s+Research+Center&url=https%3A%2F%2Fzerojsh00.github.io%2Fposts%2FCommands-and-Arguments%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%28K8S%29+%EB%8F%84%EC%BB%A4%EC%99%80+%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4%EC%9D%98+%EB%A7%A4%EA%B0%9C%EB%B3%80%EC%88%98+%EB%B0%9B%EB%8A%94+%EB%B0%A9%EB%B2%95+-+Simon%27s+Research+Center&u=https%3A%2F%2Fzerojsh00.github.io%2Fposts%2FCommands-and-Arguments%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fzerojsh00.github.io%2Fposts%2FCommands-and-Arguments%2F&text=%28K8S%29+%EB%8F%84%EC%BB%A4%EC%99%80+%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4%EC%9D%98+%EB%A7%A4%EA%B0%9C%EB%B3%80%EC%88%98+%EB%B0%9B%EB%8A%94+%EB%B0%A9%EB%B2%95+-+Simon%27s+Research+Center" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div><script src="https://utteranc.es/client.js" repo="zerojsh00/zerojsh00.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async> </script></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Network-Policy/">(K8S) 네트워크 정책(Network Policy) 기초 개념</a><li><a href="/posts/CNI-Weave/">(K8S) CNI Weave의 기초 개념</a><li><a href="/posts/Container-Networking-Interface/">(K8S) 네트워크 기초 정리 - CNI</a><li><a href="/posts/Storage-in-Docker/">(K8S) 도커의 스토리지(Storage in Docker)</a><li><a href="/posts/Security-Context/">(K8S) Security Context</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/k8s/">K8S</a> <a class="post-tag" href="/tags/kubernetes/">Kubernetes</a> <a class="post-tag" href="/tags/paper-review/">Paper Review</a> <a class="post-tag" href="/tags/security/">Security</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/speech-ai/">Speech AI</a> <a class="post-tag" href="/tags/scheduling/">Scheduling</a> <a class="post-tag" href="/tags/nlp/">NLP</a> <a class="post-tag" href="/tags/storage/">Storage</a> <a class="post-tag" href="/tags/asr/">ASR</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Configure-Environment-Variables/"><div class="card-body"> <em class="timeago small" data-ts="1660834800" > 2022-08-19 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>(K8S) 쿠버네티스 환경변수 설정, 컨피그맵(ConfigMap)과 시크릿(Secret)</h3><div class="text-muted small"><p> 이 글은 Mumshad Mannambeth가 강의한 Udemy의 Certified Kubernetes Administrator (CKA) with Practice Tests 강의 커리큘럼을 토대로 공부한 내용을 정리하였음을 밝힙니다. 쿠버네티스 환경변수 설정 우리가 개발한 애플리케이션은 대부분 여러가지 환경변수(설정값)들을 정의해야 한다. 간단한 ...</p></div></div></a></div><div class="card"> <a href="/posts/Docker-Networking/"><div class="card-body"> <em class="timeago small" data-ts="1662822000" > 2022-09-11 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>(K8S) 네트워크 기초 정리 - 도커의 네트워크</h3><div class="text-muted small"><p> 이 글은 Mumshad Mannambeth가 강의한 Udemy의 Certified Kubernetes Administrator (CKA) with Practice Tests 강의 커리큘럼을 토대로 공부한 내용을 정리하였음을 밝힙니다. 도커의 네트워크 옵션 및 네트워크 네임스페이스와 관련한 내용들을 정리해보고자 한다. bridge(docker0) ...</p></div></div></a></div><div class="card"> <a href="/posts/Container-Networking-Interface/"><div class="card-body"> <em class="timeago small" data-ts="1662908400" > 2022-09-12 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>(K8S) 네트워크 기초 정리 - CNI</h3><div class="text-muted small"><p> 이 글은 Mumshad Mannambeth가 강의한 Udemy의 Certified Kubernetes Administrator (CKA) with Practice Tests 강의 커리큘럼을 토대로 공부한 내용을 정리하였음을 밝힙니다. CNI의 필요성 이전 ‘도커의 네트워크 글’에서 bridge network를 통해서 여러 네트워크 네임스페이스에 배...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Static-Pods/" class="btn btn-outline-primary" prompt="Older"><p>(K8S) 스태틱 파드(Static Pods)</p></a> <a href="/posts/Configure-Environment-Variables/" class="btn btn-outline-primary" prompt="Newer"><p>(K8S) 쿠버네티스 환경변수 설정, 컨피그맵(ConfigMap)과 시크릿(Secret)</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/zerojsh00">Sanghyeon</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/k8s/">K8S</a> <a class="post-tag" href="/tags/kubernetes/">Kubernetes</a> <a class="post-tag" href="/tags/paper-review/">Paper Review</a> <a class="post-tag" href="/tags/security/">Security</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/speech-ai/">Speech AI</a> <a class="post-tag" href="/tags/scheduling/">Scheduling</a> <a class="post-tag" href="/tags/nlp/">NLP</a> <a class="post-tag" href="/tags/storage/">Storage</a> <a class="post-tag" href="/tags/asr/">ASR</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
