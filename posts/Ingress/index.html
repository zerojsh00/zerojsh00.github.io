<!DOCTYPE html><html lang="ko" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="(K8S) 인그레스와 인그레스 컨트롤러" /><meta name="author" content="simon sanghyeon" /><meta property="og:locale" content="ko" /><meta name="description" content="이 글은 Mumshad Mannambeth가 강의한 Udemy의 Certified Kubernetes Administrator (CKA) with Practice Tests 강의 커리큘럼을 토대로 공부한 내용을 정리하였음을 밝힙니다." /><meta property="og:description" content="이 글은 Mumshad Mannambeth가 강의한 Udemy의 Certified Kubernetes Administrator (CKA) with Practice Tests 강의 커리큘럼을 토대로 공부한 내용을 정리하였음을 밝힙니다." /><link rel="canonical" href="https://zerojsh00.github.io/posts/Ingress/" /><meta property="og:url" content="https://zerojsh00.github.io/posts/Ingress/" /><meta property="og:site_name" content="Simon’s Research Center" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-09-16T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="(K8S) 인그레스와 인그레스 컨트롤러" /><meta name="twitter:site" content="@" /><meta name="twitter:creator" content="@simon sanghyeon" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"simon sanghyeon"},"dateModified":"2022-09-16T00:00:00+09:00","datePublished":"2022-09-16T00:00:00+09:00","description":"이 글은 Mumshad Mannambeth가 강의한 Udemy의 Certified Kubernetes Administrator (CKA) with Practice Tests 강의 커리큘럼을 토대로 공부한 내용을 정리하였음을 밝힙니다.","headline":"(K8S) 인그레스와 인그레스 컨트롤러","mainEntityOfPage":{"@type":"WebPage","@id":"https://zerojsh00.github.io/posts/Ingress/"},"url":"https://zerojsh00.github.io/posts/Ingress/"}</script><title>(K8S) 인그레스와 인그레스 컨트롤러 | Simon's Research Center</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Simon's Research Center"><meta name="application-name" content="Simon's Research Center"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><meta name="google-site-verification" content="J_a4XJ2oefe52p6EYvjTFdh9LW5Yc5RyGg1HpQOjWaA" /><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/avatar.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Simon's Research Center</a></div><div class="site-subtitle font-italic">성장하는 연구원의 공책</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/zerojsh00" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['zerojsh00','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>(K8S) 인그레스와 인그레스 컨트롤러</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>(K8S) 인그레스와 인그레스 컨트롤러</h1><div class="post-meta text-muted"><div> By <em> Sanghyeon </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1663254000" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-09-16 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2407 words"> <em>13 min</em> read</span></div></div></div><div class="post-content"><p>이 글은 Mumshad Mannambeth가 강의한 Udemy의 Certified Kubernetes Administrator (CKA) with Practice Tests 강의 커리큘럼을 토대로 공부한 내용을 정리하였음을 밝힙니다.</p><hr /><h1 id="인그레스의-간단한-개념">인그레스의 간단한 개념</h1><p>인그레스(ingress)라는 단어는 외부에서 내부로 향하는 것을 의미한다. 예를 들어, 인그레스 트래픽은 외부에서 서버 내부로 들어오는 트래픽을 의미한다.</p><p>쿠버네티스에서 <code class="language-plaintext highlighter-rouge">인그레스</code>란, 클러스터 외부에서 내부로 접근하는 요청들을 어떻게 처리할 것인지 정의해둔 규칙들의 모음이다. 인그레스는 아래와 같은 기능들을 제공한다.</p><ul><li><strong>트래픽 로드밸런싱</strong><li><strong>서비스에 외부 URL을 제공함 (외부 요청을 라우팅)</strong><ul><li>/apple, /apple/red 등과 같이 특정 경로로 들어온 요청을 어떠한 서비스로 전달할지 정의하는 라우팅 규칙을 설정할 수 있음</ul><li><strong>SSL 인증서 처리</strong><ul><li>여러 개의 서비스로 요청을 라우팅할 때, 보안 연결을 위한 인증서를 쉽게 적용할 수 있음</ul><li><strong>도메인 기반 가상 호스팅을 제공함</strong><ul><li>같은 IP에 대해 다른 도메인 이름으로 요청이 왔을 때, 어떻게 처리할 것인지 정의할 수 있음</ul></ul><p>인그레스 오브젝트 자체는 위와 같은 기능들에 대해 규칙들을 정의해둔 리소스이고, 실제로 동작하기 위해서는 <code class="language-plaintext highlighter-rouge">인그레스 컨트롤러</code>라는 특별한 서버가 필요하다. 즉, 실제로 외부 요청을 받아들이는 인그레스 컨트롤러 서버가 인그레스 오브젝트에 정의된 규칙들을 로드해서 사용하는 것이다.</p><p>인그레스 컨트롤러는 <code class="language-plaintext highlighter-rouge">Nginx 웹 서버 인그레스 컨트롤러</code>, <code class="language-plaintext highlighter-rouge">GKE의 인그레스 컨트롤러</code>, <code class="language-plaintext highlighter-rouge">Contour</code>, <code class="language-plaintext highlighter-rouge">Istio</code>, <code class="language-plaintext highlighter-rouge">HAPROXY</code>, <code class="language-plaintext highlighter-rouge">Kong</code> 등 매우 다양하게 존재한다. 이들 중 쿠버네티스 커뮤니티에서 활발히 사용되고 있는 Nginx의 인그레스 컨트롤러가 대표적이다. 인그레스 컨트롤러는 쿠버네티스에서 default로 배포하지 않기 때문에 직접 설치를 위한 YAML 파일을 내려받아 설치하여 디플로이먼트를 통해 배포하든 해야 한다.</p><hr /><h1 id="인그레스를-왜-사용할까">인그레스를 왜 사용할까?</h1><p>NodePort 또는 LoadBalancer 타입의 서비스를 사용해도 위의 기능들을 얼추 구현할 수는 있다. 그럼에도 인그레스를 사용해야 하는 이유가 있을까?</p><p><img data-src="/assets/img/2022-09-17-Ingress/fig01.png" alt="fig01" data-proofer-ignore></p><p>위 그림과 같이 애플리케이션이 3개의 디플로이먼트로 생성되어 있다고 예를 들어보자. 인그레스를 사용하지 않고서 NodePort 또는 LoadBalancer 타입의 서비스를 이용하여 클러스터 외부에서 파드에 접근할 수 있도록 하였다.</p><p>그럴싸하게 작동할 수 있어 보이지만, 서비스마다 세부적인 설정을 할 때마다 복잡성이 증가하게 된다. 예를 들어, SSL/TLS 보안 연결, 접근 도메인에 따른 라우팅 등을 구현하기 위해서는 각 서비스와 디플로이먼트에 대해서 개별적으로 설정을 해야 한다. 이와 같은 방법으로는 애플리케이션의 스케일이 커질수록 복잡성은 매우 커질 것이다.</p><p><img data-src="/assets/img/2022-09-17-Ingress/fig02.png" alt="fig02" data-proofer-ignore></p><p>한편, <strong>인그레스 오브젝트를 사용하면 서비스의 URL마다 따로따로 접근할 필요 없이, 하나의 인그레스 URL 엔드포인트를 사용하여 복잡성을 줄일 수 있다.</strong> 즉, 클라이언트는 인그레스의 URL로만 접근하게 되고, 요청에 따라 인그레스에 정의된 라우팅 규칙에 맞게 처리되어 적절한 디플로이먼트의 파드로 요청이 전달될 수 있는 것이다. 보안 연결 등과 같은 세부 설정 또한 서비스와 디플로이먼트가 아닌 인그레스에서 처리되기 때문에, 각 서비스와 디플로이먼트에 일일이 설정을 적용할 필요 없이 복잡한 설정들을 한번에 관리할 수 있다.</p><hr /><h1 id="인그레스-사용-방법">인그레스 사용 방법</h1><p>인그레스를 사용하기 위해서는 다음의 순서를 따라야 한다.</p><ul><li><strong>인그레스 컨트롤러를 생성한다.</strong><ul><li>예를 들어, 공식 깃허브에서 제공되는 Nginx 인그레스 컨트롤러의 YAML 파일을 이용할 수 있다.</ul><li><strong>인그레스 컨트롤러를 외부로 노출하기 위해 인그레스의 서비스를 생성한다.</strong><ul><li><code class="language-plaintext highlighter-rouge">kubectl apply -f {인그레스 컨트롤러 YAML 파일을 제공하는 경로}.yaml</code> 명령으로 인그레스 컨트롤러를 실행한다 하더라도, 인그레스 컨트롤러 서버(e.g., Nginx)의 디플로이먼트만 생성되었을 뿐, 해당 (Nginx)서버의 파드에 접근할 수 있는 서비스가 생성된 것은 아니므로, 직접 생성해야 한다.</ul><li><strong>요청 처리 규칙을 정의하는 인그레스 오브젝트를 생성한다.</strong><ul><li>인그레스 오브젝트를 생성하면, 인그레스 컨트롤러는 항상 인그레스 리소스를 지켜보고 있다가 자동으로 로드해서 인그레스 컨트롤러 웹 서버(e.g., Nginx)에 적용한다. 기본적으로 모든 네임스페이스의 인그레스 리소스를 다룬다.</ul><li><strong>인그레스 컨트롤러 서버로 들어온 요청은 인그레스 규칙에 따라 적절한 서비스로 전달된다.</strong></ul><h2 id="인그레스-컨트롤러-생성의-예"><span class="mr-2">인그레스 컨트롤러 생성의 예</span><a href="#인그레스-컨트롤러-생성의-예" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>예를 들어, ingress-nginx를 생성하고자 한다면, <a href="https://kubernetes.github.io/ingress-nginx/deploy/">https://kubernetes.github.io/ingress-nginx/deploy/</a> 사이트에서 아래 명령어를 참고하여 <code class="language-plaintext highlighter-rouge">kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.3.1/deploy/static/provider/cloud/deploy.yaml</code> 명령어로 생성할 수 있다.</p><p>이후, 다음과 같이 <code class="language-plaintext highlighter-rouge">ingress-nginx 네임스페이스</code>의 디플로이먼트와 파드를 확인해보면 Nginx 웹 서버가 생성되어 있을 것이다.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="nv">$ </span>kubectl get deployment <span class="nt">-n</span> ingress-nginx
NAME                       READY   UP-TO-DATE   AVAILABLE   AGE
ingress-nginx-controller   1/1     1            1           6m41s

<span class="nv">$ </span>kubectl get pods <span class="nt">-n</span> ingress-nginx
NAME                                       READY   STATUS      RESTARTS   AGE
ingress-nginx-admission-create-sln9j       0/1     Completed   0          6m48s
ingress-nginx-admission-patch-r7p5j        0/1     Completed   1          6m48s
ingress-nginx-controller-b4fcbcc8f-sm4qm   1/1     Running     0          6m48s
</pre></table></code></div></div><p>하지만 이처럼 YAML 파일을 통해 Nginx 인그레스 컨트롤러를 설치했다 하더라도, Nginx 디플로이먼트만 생성됐을 뿐, Nginx 웹 서버를 클러스터 외부로 노출하기 위한 서비스가 생성되지는 않았다. 따라서 다음 과정인 서비스를 환경에 맞게 생성해야 한다.</p><h2 id="인그레스-컨트롤러를-노출하기-위한-서비스-생성의-예"><span class="mr-2">인그레스 컨트롤러를 노출하기 위한 서비스 생성의 예</span><a href="#인그레스-컨트롤러를-노출하기-위한-서비스-생성의-예" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="c1"># ingress-service-example.yaml</span>

<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Service</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">ingress-nginx</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">ingress-nginx</span> <span class="c1"># ingress-nginx-controller 디플로이먼트가 위치한 ingress-nginx 네임스페이스에 서비스를 생성함</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">NodePort</span> <span class="c1"># AWS, GKE 등 LoadBalancer 타입의 서비스를 사용할 수 있다면 LoadBalancer를 사용함</span>
  <span class="na">ports</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">http</span>
    <span class="na">port</span><span class="pi">:</span> <span class="m">80</span>
    <span class="na">targetPort</span><span class="pi">:</span> <span class="m">80</span>
    <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">https</span>
    <span class="na">port</span><span class="pi">:</span> <span class="m">443</span>
    <span class="na">targetPort</span><span class="pi">:</span> <span class="m">443</span>
    <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span>
</pre></table></code></div></div><p>인그레스 컨트롤러를 노출하기 위한 서비스는 ingress-nginx-controller 디플로이먼트가 위치한 ingress-nginx 네임스페이스에 생성한다. 이 예제에서는 간단한 테스트를 위해서 NodPort 타입의 서비스를 만들었으나, LoadBalancer 타입의 서비스를 활용할 수 있는 AWS 등의 환경에서는 LoadBalancer 타입으로 서비스를 생성하여 사용한다.</p><p>이후, <code class="language-plaintext highlighter-rouge">kubectl apply -f ingress-service-example.yaml</code> 명령으로 서비스를 실행한다.</p><h2 id="인그레스-오브젝트-생성의-예"><span class="mr-2">인그레스 오브젝트 생성의 예</span><a href="#인그레스-오브젝트-생성의-예" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="c1"># ingress-example.yaml</span>

<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">networking.k8s.io.v1beta1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Ingress</span> <span class="c1"># 인그레스 오브젝트를 생성하므로</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">ingress-example</span>

<span class="na">spec</span><span class="pi">:</span>
  <span class="na">rules</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">host</span><span class="pi">:</span> <span class="s">simon.example.com</span> <span class="c1"># 해당 도메인 이름으로 접근하는 요청에 대해서 처리 규칙을 적용함</span>
    <span class="na">http</span><span class="pi">:</span>
      <span class="na">paths</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s">/subpath</span> <span class="c1"># 해당 경로에 들어온 요청을 backend에 정의된 서비스로 전달함</span>
        <span class="na">backend</span><span class="pi">:</span>
          <span class="na">serviceName</span><span class="pi">:</span> <span class="s">hostname-service</span> <span class="c1"># '/subpath' 경로로 들어온 요청을 hostname-service라는 Servce에 전달함</span>
          <span class="na">servicePort</span><span class="pi">:</span> <span class="m">80</span> <span class="c1"># serviceName에 설정한 서비스의 포트</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">kubectl apply -f ingress-example.yaml</code> 명령어를 통해, 요청을 처리하는 규칙을 정의하는 인그레스 오브젝트를 생성할 수 있다. 이후, 인그레스 컨트롤러가 인그레스 오브젝트를 발견하여 규칙을 적용한다.</p><p>참고로 위 예제에서는 simon.example.com/subpath라는 요청이 있을 때, ‘hostname-service’라는 이름의 서비스로 요청을 전달한다. <code class="language-plaintext highlighter-rouge">kubectl apply -f hostname-deployment.yaml</code> 및 <code class="language-plaintext highlighter-rouge">kubectl apply -f hostname-service.yaml</code> 명령으로 미리 파드와 서비스를 생성해두어야 한다. (이 과정은 생략)</p><hr /><h1 id="참고-문헌">참고 문헌</h1><p>[1] <code class="language-plaintext highlighter-rouge">Mumshad Mannambeth의 강의</code> : <a href="https://www.udemy.com/course/certified-kubernetes-administrator-with-practice-tests/">Certified Kubernetes Administrator (CKA) with Practice Tests</a><br /> [2] <code class="language-plaintext highlighter-rouge">시작하세요! 도커/쿠버네티스 (용찬호 지음)</code> : <a href="http://www.yes24.com/Product/Goods/84927385">시작하세요! 도커/쿠버네티스</a><br /> [3] <code class="language-plaintext highlighter-rouge">따배쿠 강의</code> : <a href="https://www.youtube.com/watch?v=y5-u4jtflic&amp;t=1258s">8-1 Kubernetes Ingress 개념과 Ingress Controller 설치!</a></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/kubernetes/'>Kubernetes</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/kubernetes/" class="post-tag no-text-decoration" >Kubernetes</a> <a href="/tags/k8s/" class="post-tag no-text-decoration" >K8S</a> <a href="/tags/network/" class="post-tag no-text-decoration" >Network</a> <a href="/tags/ingress/" class="post-tag no-text-decoration" >Ingress</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%28K8S%29+%EC%9D%B8%EA%B7%B8%EB%A0%88%EC%8A%A4%EC%99%80+%EC%9D%B8%EA%B7%B8%EB%A0%88%EC%8A%A4+%EC%BB%A8%ED%8A%B8%EB%A1%A4%EB%9F%AC+-+Simon%27s+Research+Center&url=https%3A%2F%2Fzerojsh00.github.io%2Fposts%2FIngress%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%28K8S%29+%EC%9D%B8%EA%B7%B8%EB%A0%88%EC%8A%A4%EC%99%80+%EC%9D%B8%EA%B7%B8%EB%A0%88%EC%8A%A4+%EC%BB%A8%ED%8A%B8%EB%A1%A4%EB%9F%AC+-+Simon%27s+Research+Center&u=https%3A%2F%2Fzerojsh00.github.io%2Fposts%2FIngress%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fzerojsh00.github.io%2Fposts%2FIngress%2F&text=%28K8S%29+%EC%9D%B8%EA%B7%B8%EB%A0%88%EC%8A%A4%EC%99%80+%EC%9D%B8%EA%B7%B8%EB%A0%88%EC%8A%A4+%EC%BB%A8%ED%8A%B8%EB%A1%A4%EB%9F%AC+-+Simon%27s+Research+Center" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div><script src="https://utteranc.es/client.js" repo="zerojsh00/zerojsh00.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async> </script></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Network-Policy/">(K8S) 네트워크 정책(Network Policy) 기초 개념</a><li><a href="/posts/CNI-Weave/">(K8S) CNI Weave의 기초 개념</a><li><a href="/posts/Container-Networking-Interface/">(K8S) 네트워크 기초 정리 - CNI</a><li><a href="/posts/Storage-in-Docker/">(K8S) 도커의 스토리지(Storage in Docker)</a><li><a href="/posts/Security-Context/">(K8S) Security Context</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/k8s/">K8S</a> <a class="post-tag" href="/tags/kubernetes/">Kubernetes</a> <a class="post-tag" href="/tags/paper-review/">Paper Review</a> <a class="post-tag" href="/tags/security/">Security</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/speech-ai/">Speech AI</a> <a class="post-tag" href="/tags/scheduling/">Scheduling</a> <a class="post-tag" href="/tags/nlp/">NLP</a> <a class="post-tag" href="/tags/storage/">Storage</a> <a class="post-tag" href="/tags/asr/">ASR</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Container-Networking-Interface/"><div class="card-body"> <em class="timeago small" data-ts="1662908400" > 2022-09-12 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>(K8S) 네트워크 기초 정리 - CNI</h3><div class="text-muted small"><p> 이 글은 Mumshad Mannambeth가 강의한 Udemy의 Certified Kubernetes Administrator (CKA) with Practice Tests 강의 커리큘럼을 토대로 공부한 내용을 정리하였음을 밝힙니다. CNI의 필요성 이전 ‘도커의 네트워크 글’에서 bridge network를 통해서 여러 네트워크 네임스페이스에 ...</p></div></div></a></div><div class="card"> <a href="/posts/CNI-Weave/"><div class="card-body"> <em class="timeago small" data-ts="1662994800" > 2022-09-13 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>(K8S) CNI Weave의 기초 개념</h3><div class="text-muted small"><p> 이 글은 Mumshad Mannambeth가 강의한 Udemy의 Certified Kubernetes Administrator (CKA) with Practice Tests 강의 커리큘럼을 토대로 공부한 내용을 정리하였음을 밝힙니다. CNI 솔루션 중에서 Weave에 대한 간단한 컨셉을 다룬다. CNI 솔루션을 쓰지 않는 경우의 한계 CN...</p></div></div></a></div><div class="card"> <a href="/posts/Service-Networking/"><div class="card-body"> <em class="timeago small" data-ts="1663081200" > 2022-09-14 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>(K8S) 서비스 네트워킹</h3><div class="text-muted small"><p> 이 글은 Mumshad Mannambeth가 강의한 Udemy의 Certified Kubernetes Administrator (CKA) with Practice Tests 강의 커리큘럼을 토대로 공부한 내용을 정리하였음을 밝힙니다. 이전 글들에서 파드 간에 네트워크 연결이 될 수 있도록 많은 개념들을 정리했지만, 사실 파드들끼리 직접적으로 연결...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/CoreDNS-in-Kubernetes/" class="btn btn-outline-primary" prompt="Older"><p>(K8S) 쿠버네티스에서의 CoreDNS</p></a> <a href="/posts/BERTopic/" class="btn btn-outline-primary" prompt="Newer"><p>(NLP) BERTopic 개념 정리</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/zerojsh00">Sanghyeon</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/k8s/">K8S</a> <a class="post-tag" href="/tags/kubernetes/">Kubernetes</a> <a class="post-tag" href="/tags/paper-review/">Paper Review</a> <a class="post-tag" href="/tags/security/">Security</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/speech-ai/">Speech AI</a> <a class="post-tag" href="/tags/scheduling/">Scheduling</a> <a class="post-tag" href="/tags/nlp/">NLP</a> <a class="post-tag" href="/tags/storage/">Storage</a> <a class="post-tag" href="/tags/asr/">ASR</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
